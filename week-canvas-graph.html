<!doctype html>
<html>
<head>
	<meta charset="utf-8">
</head>
<body>
	<canvas width="1200" height="460" data-graph="timeGraph">
		Sorry, your browser does not support canvas.
	</canvas>
	<script data-graph-data="timeGraph">
		[{"dayName":"Mon","open":7,"close":22,"hours":[0.139614074914869466515323496,0.1316685584562996594778660613,0.1600454029511918274687854711,0.2508513053348467650397275823,0.4029511918274687854710556186,0.7298524404086265607264472191,0.7343927355278093076049943246,0.6515323496027241770715096481,0.6072644721906923950056753689,0.6901248581157775255391600454,0.7797956867196367763904653802,0.7911464245175936435868331442,0.4790011350737797956867196368,0.3200908059023836549375709421,0.2156640181611804767309875142,0.0227014755959137343927355278]},{"dayName":"Tue","open":7,"close":22,"hours":[0.1577752553916004540295119183,0.1577752553916004540295119183,0.2077185017026106696935300795,0.2338251986379114642451759364,0.3927355278093076049943246311,0.8206583427922814982973893303,0.8036322360953461975028376844,0.6958002270147559591373439274,0.6503972758229284903518728717,0.709421112372304199772985244,0.9307604994324631101021566402,0.8660612939841089670828603859,0.569807037457434733257661748,0.3859250851305334846765039728,0.2451759364358683314415437003,0.0249716231555051078320090806]},{"dayName":"Wed","open":7,"close":22,"hours":[0.165720771850170261066969353,0.1782065834279228149829738933,0.2576617480136208853575482406,0.2508513053348467650397275823,0.404086265607264472190692395,0.8694665153234960272417707151,0.9182746878547105561861520999,0.7593643586833144154370034052,0.7480136208853575482406356413,0.8070374574347332576617480136,0.9545970488081725312145289444,0.828603859250851305334846765,0.688989784335981838819523269,0.4404086265607264472190692395,0.2758229284903518728717366629,0.0249716231555051078320090806]},{"dayName":"Thu","open":7,"close":22,"hours":[0.1486946651532349602724177072,0.1418842224744608399545970488,0.2485811577752553916004540295,0.3041997729852440408626560726,0.4494892167990919409761634506,0.8569807037457434733257661748,0.8785471055618615209988649262,0.6992054483541430192962542565,0.7207718501702610669693530079,0.7582292849035187287173666288,1,0.9307604994324631101021566402,0.6640181611804767309875141884,0.4608399545970488081725312145,0.2792281498297389330306469921,0.020431328036322360953461975]},{"dayName":"Fri","open":7,"close":22,"hours":[0.1577752553916004540295119183,0.1793416572077185017026106697,0.258796821793416572077185017,0.3144154370034052213393870602,0.5005675368898978433598183882,0.9455164585698070374574347333,0.9659477866061293984108967083,0.8592508513053348467650397276,0.8263337116912599318955732123,0.9409761634506242905788876277,0.9977298524404086265607264472,0.7548240635641316685584562997,0.5175936435868331441543700341,0.3234960272417707150964812713,0.2292849035187287173666288309,0.0249716231555051078320090806]},{"dayName":"Sat","open":7,"close":22,"hours":[0.0976163450624290578887627696,0.1430192962542565266742338252,0.2156640181611804767309875142,0.3847900113507377979568671964,0.549375709421112372304199773,0.648127128263337116912599319,0.7139614074914869466515323496,0.7604994324631101021566401816,0.7741203178206583427922814983,0.7457434733257661748013620885,0.6186152099886492622020431328,0.4801362088535754824063564132,0.3620885357548240635641316686,0.2020431328036322360953461975,0.1157775255391600454029511918,0.0227014755959137343927355278]},{"dayName":"Sun","open":7,"close":22,"hours":[0.0896708286038592508513053348,0.0499432463110102156640181612,0.0964812712826333711691259932,0.2792281498297389330306469921,0.3416572077185017026106696935,0.4801362088535754824063564132,0.4744608399545970488081725312,0.5664018161180476730987514188,0.5039727582292849035187287174,0.4926220204313280363223609535,0.4279228149829738933030646992,0.2780930760499432463110102157,0.2395005675368898978433598184,0.1373439273552780930760499432,0.1214528944381384790011350738,0.026106696935300794551645857]}]		
	</script>
	<script>
		const App = {};
		App.Graph = function($canvas) {
			const self = this;
			const config = {
				barSpacing: 22,
				barHeight: 40,
				barSpacing: 8,
				cornerRadius: 8
			};
			let canvasElement, 
				canvasContext,
				canvasId,
				canvasData,
				canvasWidth,
				canvasHeight;
			this.init = () => {
				canvasElement = $canvas.get(0);
				canvasContext = canvasElement.getContext('2d');
				canvasId = $canvas.attr('data-graph');
				canvasWidth = $canvas.attr('width');
				canvasHeight = $canvas.attr('height');
				canvasData = $.parseJSON($(`[data-graph-data='${canvasId}']`).text());
				this.calculateCanvasSize();
				this.paintNavigation();
				this.parseData();
				this.bindEvents();
			};
			this.bindEvents = () => {
				$(window).on('resize', () => {
					this.calculateCanvasSize();
				});
				// $(document).on('click', '[data-graph-day]', function(e) {
				// 	e.preventDefault();
				// 	self.parseData();
				// });
			};
			this.calculateCanvasSize = () => {
				const canvasRatio = canvasHeight / canvasWidth;
				const newCanvasWidth = $canvas.parent().width();
				const newCanvasHeight = Math.round(newCanvasWidth * canvasRatio);
				$canvas.css({'width': newCanvasWidth, 'height': newCanvasHeight});
			};
			this.parseData = (day = 0) => {
				canvasContext.clearRect(0, 0, canvasWidth, canvasHeight);
				const data = canvasData[day];
				this.paintTimes(data.open, data.close);
				this.paintBackgroundBars(data.hours.length);
				this.paintForegroundBars(data.hours);
				this.updateButtons(day);
			};
			this.paintNavigation = () => {};
			this.updateButtons = () => {
				
			};
			this.init();
		}
		const Graph = new App.Graph();
	</script>
</body>
</html>